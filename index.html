<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Title tester (124px / max 2 lines)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Roboto -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;600&display=swap"
    rel="stylesheet"
  >

  <!-- Стили: файл лежит рядом с index.html -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main class="page">
    <header class="header">
      <h1>Title tester (124px / max 2 lines)</h1>
      <p>
        Type your translation <b>directly in the preview tile</b> below.
        It uses <b>Roboto 15px / line-height 20px</b> and fixed width
        <b>124 px</b>. If the text overflows to a 3rd line, please shorten it.
      </p>
    </header>

    <section class="content">
      <div class="preview-column">
        <div class="preview-label">Preview</div>

        <div class="tile-preview">
          <div
            id="preview"
            class="tile-preview-inner"
            contenteditable="true"
          ></div>
        </div>

        <div id="status" class="status ok">
          <span class="dot"></span>
          <span>Fits in 2 lines</span>
        </div>

        <div id="metrics" class="metrics"></div>
      </div>

      <div class="guidelines-column">
        <div class="preview-label">Guidelines</div>
        <ul class="hint-list">
          <li>Maximum <b>2 lines</b> inside 124 px width.</li>
          <li>Prefer <b>up to 3 short words</b>.</li>
          <li>Avoid very long compound words.</li>
          <li>If it doesn't fit: use a <b>shorter alternative</b>.</li>
        </ul>
      </div>
    </section>
  </main>

  <script>
    const preview = document.getElementById('preview');
    const status = document.getElementById('status');
    const metrics = document.getElementById('metrics');

    function update() {
      const text = (preview.textContent || "").trim();

      requestAnimationFrame(() => {
        const style = getComputedStyle(preview);
        const lineHeight =
          parseFloat(style.lineHeight || "20") || 20;

        const height = preview.scrollHeight;
        const lines = Math.round(height / lineHeight);

        if (lines <= 2) {
          status.className = "status ok";
          status.lastElementChild.textContent = "Fits in 2 lines";
        } else {
          status.className = "status warn";
          status.lastElementChild.textContent =
            `Too long (${lines} lines) – please shorten`;
        }

        metrics.textContent =
          `Characters: ${text.length} · Estimated lines: ${lines}`;
      });
    }

    preview.addEventListener("input", update);
    // начальный вызов
    update();
  </script>
</body>
</html>
